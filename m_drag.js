!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof module&&module.exports?module.exports=t():e.m_drag=t()}(this,function(){"use strict";var e={revertOnFail:!0},t="ontouchstart"in window||"DocumentTouch"in window&&document instanceof DocumentTouch;return function(n){function o(e){return function(t){var n=/touch/.test(t.type)?t.touches[0]:t,o=d[e];o&&(o.target=this,o.ox=n.ox||n.pageX,o.oy=n.oy||n.pageY,o.user.onmousedown&&o.user.onmousedown.call(this,t,o,d)===!1||(o.type=t.type))}}function u(e){var t=/touch/.test(e.type)?e.touches[0]:e,o=!1;for(var u in d){var p=d[u];if(p.type){o=!0;var a=[p.pageX,p.pageY,p.dx,p.dy];if(p.pageX=t.pageX,p.pageY=t.pageY,p.dx=p.ox-t.pageX,p.dy=p.oy-t.pageY,p.move&&p.move(e,p,d)===!1)return n.revertOnFail&&(p.dy=a.pop(),p.dx=a.pop(),p.pageY=a.pop(),p.pageX=a.pop()),r(e)}}o&&e.preventDefault()}function r(e){for(var t in d){var n=d[t];n.type&&(n.up&&n.up(e,n,d),n.type=null,n.dx=n.dy=0)}}function p(e,t,n,u){return 0===arguments.length?d:1===arguments.length?d[e]:("function"==typeof t&&(u=n,n=t,t={}),delete d[e],d[e]={name:e,user:t||{},move:n,up:u},o(e))}n=n||{};for(var a in e)a in n||(n[a]=e[a]);"touch"in n&&(t=n.touch);var i=t?"touchmove":"mousemove",c=t?"touchend":"mouseup",d={};return document.addEventListener(i,u),document.addEventListener(c,r),p.destroy=function(){d={},document.removeEventListener(i,u),document.removeEventListener(c,r)},p}});